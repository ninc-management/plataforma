<form (ngSubmit)="createParticipant()" #form="ngForm" aria-labelledby="title">
  <div class="row">
    <div class="col-9">
      <div class="form-control-group">
        <label class="label" for="input-participant-name">Nome do participante:</label>
        <input
          nbInput
          [(ngModel)]="participant.name"
          #name="ngModel"
          id="input-participant-name"
          name="participant-name"
          placeholder="Nome do participante"
          fullWidth
          fieldSize="large"
          [required]="validation.name.required"
          [minlength]="validation.name.minLength"
          [maxlength]="validation.name.maxLength"
          [status]="name.dirty ? (name.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="name.invalid && name.touched ? true : null"
        />
      </div>
      <ng-container *ngIf="name.invalid && name.touched">
        <p class="caption status-danger" *ngIf="name.errors?.required">O nome é obrigatório!</p>
        <p class="caption status-danger" *ngIf="name.errors?.minlength || name.errors?.maxlength">
          O nome deve conter entre {{ validation.name.minLength }} a {{ validation.name.maxLength }} caracteres
        </p>
      </ng-container>
    </div>
    <div class="col-3">
      <div class="form-control-group">
        <label class="label" for="input-date">Data de nascimento:</label>
        <input
          nbInput
          [(ngModel)]="participant.date"
          #date="ngModel"
          id="input-date"
          name="date"
          placeholder="Escolha uma data"
          fullWidth
          fieldSize="large"
          [nbDatepicker]="datepicker"
          [required]="validation.date.required"
          [status]="date.dirty ? (date.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="date.invalid && date.touched ? true : null"
        />
        <nb-datepicker #datepicker></nb-datepicker>
      </div>
    </div>
    <div class="col-7">
      <div class="form-control-group">
        <label class="label" for="input-email">Email:</label>
        <input
          nbInput
          [email]="true"
          [(ngModel)]="participant.email"
          #email="ngModel"
          id="input-participant-email"
          name="participant-email"
          placeholder="Email do participante"
          fullWidth
          fieldSize="large"
          [required]="validation.email.required"
          [status]="email.dirty ? (email.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="email.invalid && email.touched ? true : null"
        />
      </div>
      <ng-container *ngIf="email.invalid && email.touched">
        <p class="caption status-danger" *ngIf="email.errors?.required">O email é obrigatório!</p>
      </ng-container>
    </div>
    <div class="col-5">
      <div class="form-control-group">
        <label class="label" for="input-phone">Telefone:</label>
        <input
          nbInput
          [(ngModel)]="participant.phone"
          #phone="ngModel"
          id="input-phone"
          name="phone"
          placeholder="Telefone com DDD"
          fullWidth
          fieldSize="large"
          [brmasker]="{ phone: true }"
          ngxSelectAllText
          [required]="validation.phone.required"
          [minlength]="validation.phone.minLength"
          [maxlength]="validation.phone.maxLength"
          [status]="phone.dirty ? (phone.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="phone.invalid && phone.touched ? true : null"
        />
        <ng-container *ngIf="phone.invalid && phone.touched">
          <p class="caption status-danger" *ngIf="phone.errors?.required">O telefone é obrigatório!</p>
          <p class="caption status-danger" *ngIf="phone.errors?.minlength || phone.errors?.maxlength">
            O telefone deve conter entre {{ validation.phone.minLength - 4 }} a
            {{ validation.phone.maxLength - 4 }} números
          </p>
        </ng-container>
      </div>
    </div>
    <div class="col-12">
      <div class="form-control-group">
        <label class="label" for="input-address">Endereço:</label>
        <input
          nbInput
          [(ngModel)]="participant.address"
          #address="ngModel"
          id="input-participant-address"
          name="participant-address"
          placeholder="Endereço do participante"
          fullWidth
          fieldSize="large"
          [required]="validation.address.required"
          [minlength]="validation.address.minLength"
          [maxlength]="validation.address.maxLength"
          [status]="address.dirty ? (address.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="address.invalid && address.touched ? true : null"
        />
      </div>
      <ng-container *ngIf="address.invalid && address.touched">
        <p class="caption status-danger" *ngIf="address.errors?.required">O endereço é obrigatório!</p>
        <p class="caption status-danger" *ngIf="address.errors?.minlength || address.errors?.maxlength">
          O endereço deve conter entre {{ validation.address.minLength - 4 }} a
          {{ validation.address.maxLength - 4 }} números
        </p>
      </ng-container>
    </div>
    <div class="col-6">
      <div class="form-control-group">
        <label class="label" for="input-cpf">CPF:</label>
        <input
          nbInput
          [(ngModel)]="participant.CPF"
          #cpf="ngModel"
          id="input-participant-cpf"
          name="participant-cpf"
          placeholder="Endereço do participante"
          fullWidth
          fieldSize="large"
          [brmasker]="{ person: true }"
          [required]="validation.CPF.required"
          [minlength]="validation.CPF.minLength"
          [maxlength]="validation.CPF.maxLength"
          [status]="cpf.dirty ? (cpf.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="cpf.invalid && cpf.touched ? true : null"
        />
      </div>
      <ng-container *ngIf="cpf.invalid && cpf.touched">
        <p class="caption status-danger" *ngIf="cpf.errors?.required">O endereço é obrigatório!</p>
        <p class="caption status-danger" *ngIf="cpf.errors?.minlength || cpf.errors?.maxlength">
          O CPF deve conter entre {{ validation.CPF.minLength - 4 }} a {{ validation.CPF.maxLength - 4 }} números
        </p>
      </ng-container>
    </div>
    <div class="col-6">
      <div class="form-control-group">
        <label class="label" for="input-job">Profissão:</label>
        <input
          nbInput
          [(ngModel)]="participant.job"
          #job="ngModel"
          id="input-participant-job"
          name="participant-job"
          placeholder="Profissão do participante"
          fullWidth
          fieldSize="large"
          [required]="validation.job.required"
          [minlength]="validation.job.minLength"
          [maxlength]="validation.job.maxLength"
          [status]="job.dirty ? (job.invalid ? 'danger' : 'success') : 'basic'"
          [attr.aria-invalid]="job.invalid && job.touched ? true : null"
        />
      </div>
      <ng-container *ngIf="job.invalid && job.touched">
        <p class="caption status-danger" *ngIf="job.errors?.required">O profissão é obrigatório!</p>
        <p class="caption status-danger" *ngIf="job.errors?.minlength || job.errors?.maxlength">
          O endereço deve conter entre {{ validation.job.minLength - 4 }} a {{ validation.job.maxLength - 4 }} números
        </p>
      </ng-container>
    </div>
  </div>
  <button nbButton fullWidth fieldSize="large" status="primary" [disabled]="!form.valid">ADICIONAR</button>
</form>
