<nb-tabset fullWidth>
  <nb-tab tabId="general-tab" [tabTitle]="isPhone() ? '' : 'Geral'" tabIcon="settings-2-outline" responsive>
    <form  #generalConfigForm="ngForm" aria-labelledby="title">
      <div class="mb-3">
        <div class="row">
          <div class="col-auto">
            <label class="label-divider">
              Paleta de cores
              <!-- Tooltip text to be defined -->
              <nb-icon
                status="info"
                icon="info"
                pack="eva"
                [options]="{ animation: { type: 'pulse' } }"
                nbTooltip=""
                nbTooltipPlacement="top"
                nbTooltipStatus="info"
              ></nb-icon>
            </label>
          </div>
          <div class="col">
            <hr />
          </div>
        </div>
        <div class="row mb-3">
          <div class="col">
            <label class="label">Primária</label>
            <div class="d-flex">
              <input
                class="color-input"
                [(ngModel)]="configCompany.colors.primary.color500"
                #version="ngModel"
                id="input-primary-color"
                name="primary-color"
                type="color"
                placeholder="Selecione uma cor"
                [style]="{ background: configCompany.colors.primary.color500 || 'black' }"
              />
              <input
                nbInput
                [(ngModel)]="configCompany.colors.primary.color500"
                #primaryColorCode="ngModel"
                id="input-primary-color-code"
                name="primary-color-code"
                fieldSize="large"
              />
              <button type="button" (click)="getEvaColors()" nbButton status="primary">
                <nb-icon icon="refresh-outline"></nb-icon>
              </button>
            </div>
          </div>
          <div class="col">
            <label class="label">Sucesso</label>
            <div class="d-flex">
              <input
                class="color-input"
                [(ngModel)]="configCompany.colors.success.color500"
                #successColor="ngModel"
                id="input-success-color"
                name="success-color"
                type="color"
                [style]="{ background: configCompany.colors.success.color500 || 'black' }"
              />
              <input
                nbInput
                [(ngModel)]="configCompany.colors.success.color500"
                #successColorCode="ngModel"
                id="input-success-color-code"
                name="success-color-code"
                fieldSize="large"
              />
            </div>
          </div>
          <div class="col">
            <label class="label">Info</label>
            <div class="d-flex">
              <input
                class="color-input"
                [(ngModel)]="configCompany.colors.info.color500"
                #infoColor="ngModel"
                id="input-info-color"
                name="info-color"
                type="color"
                [style]="{ background: configCompany.colors.info.color500 || 'black' }"
              />
              <input
                nbInput
                [(ngModel)]="configCompany.colors.info.color500"
                #infoColorCode="ngModel"
                id="input-info-color-code"
                name="info-color-code"
                fieldSize="large"
              />
            </div>
          </div>

          <div class="col">
            <label class="label">Aviso</label>
            <div class="d-flex">
              <input
                class="color-input"
                [(ngModel)]="configCompany.colors.warning.color500"
                #warningColor="ngModel"
                id="input-warning-color"
                name="warning-color"
                type="color"
                [style]="{ background: configCompany.colors.warning.color500 || 'black' }"
              />
              <input
                nbInput
                [(ngModel)]="configCompany.colors.warning.color500"
                #warningColorCode="ngModel"
                id="input-warning-color-code"
                name="warning-color-code"
                fieldSize="large"
              />
            </div>
          </div>

          <div class="col">
            <label class="label">Alerta</label>
            <div class="d-flex">
              <input
                class="color-input"
                [(ngModel)]="configCompany.colors.danger.color500"
                #dangerColor="ngModel"
                id="input-danger-color"
                name="danger-color"
                type="color"
                [style]="{ background: configCompany.colors.danger.color500 || 'black' }"
              />
              <input
                nbInput
                [(ngModel)]="configCompany.colors.danger.color500"
                #dangerColorCode="ngModel"
                id="input-danger-color-code"
                name="danger-color-code"
                fieldSize="large"
              />
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-auto">
            <label class="label-divider">
              Logos da empresa
              <!-- Tooltip text to be defined -->
              <nb-icon
                status="info"
                icon="info"
                pack="eva"
                [options]="{ animation: { type: 'pulse' } }"
                nbTooltip=""
                nbTooltipPlacement="top"
                nbTooltipStatus="info"
              ></nb-icon>
            </label>
          </div>
          <div class="col">
            <hr />
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-control-group">
              <label class="label" for="input-logo-default">Arquivo da logo</label>
              <div class="d-flex">
                <button
                  class="mr-2"
                  nbButton
                  type="button"
                  status="primary"
                  (click)="openUploadDialog(LOGO_TYPES.logoDefault)"
                >
                  <nb-icon nbPrefix icon="attach-2-outline" pack="eva"></nb-icon>
                </button>
                <input
                  nbInput
                  [(ngModel)]="configCompany[LOGO_TYPES.logoDefault].name"
                  #logoDefault="ngModel"
                  id="input-logo-default"
                  name="logo-default"
                  fullWidth
                  fieldSize="large"
                  readonly
                />
              </div>
            </div>
            <div class="form-control-group">
              <label class="label" for="input-logo-without-name">Arquivo da logo sem nome</label>
              <div class="d-flex">
                <button
                  class="mr-2"
                  nbButton
                  type="button"
                  status="primary"
                  (click)="openUploadDialog(LOGO_TYPES.logoWithoutName)"
                >
                  <nb-icon nbPrefix icon="attach-2-outline" pack="eva"></nb-icon>
                </button>
                <input
                  nbInput
                  [(ngModel)]="configCompany[LOGO_TYPES.logoWithoutName].name"
                  #logoWithoutName="ngModel"
                  id="input-logo-without-name"
                  name="logo-without-name"
                  fullWidth
                  fieldSize="large"
                  readonly
                />
              </div>
            </div>
            <div class="form-control-group">
              <label class="label" for="input-logo-white">Arquivo da logo tema escuro</label>
              <div class="d-flex">
                <button
                  class="mr-2"
                  nbButton
                  type="button"
                  status="primary"
                  (click)="openUploadDialog(LOGO_TYPES.logoWhite)"
                >
                  <nb-icon nbPrefix icon="attach-2-outline" pack="eva"></nb-icon>
                </button>
                <input
                  nbInput
                  [(ngModel)]="configCompany[LOGO_TYPES.logoWhite].name"
                  #logoWhite="ngModel"
                  id="input-logo-white"
                  name="logo-white"
                  fullWidth
                  fieldSize="large"
                  readonly
                />
              </div>
            </div>
            <div class="form-control-group">
              <label class="label" for="input-logo-white-without-name">Arquivo da logo tema escuro sem nome</label>
              <div class="d-flex">
                <button
                  class="mr-2"
                  nbButton
                  type="button"
                  status="primary"
                  (click)="openUploadDialog(LOGO_TYPES.logoWhiteWithoutName)"
                >
                  <nb-icon nbPrefix icon="attach-2-outline" pack="eva"></nb-icon>
                </button>
                <input
                  nbInput
                  [(ngModel)]="configCompany[LOGO_TYPES.logoWhiteWithoutName].name"
                  #logoWhiteWithoutName="ngModel"
                  id="input-logo-white-without-name"
                  name="logo-white-without-name"
                  fullWidth
                  fieldSize="large"
                  readonly
                />
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="row mb-1">
              <div class="col-6 d-flex flex-column align-items-center">
                <label class="label">Logo</label>
                <img
                  [src]="configCompany[LOGO_TYPES.logoDefault].url"
                  class="p-3 logo"
                  height="164"
                  alt="Logo da empresa"
                />
              </div>
              <div class="col-6 d-flex flex-column align-items-center">
                <label class="label">Logo sem nome</label>
                <img
                  [src]="configCompany[LOGO_TYPES.logoWithoutName].url"
                  class="p-3 logo"
                  height="164"
                  alt="Logo da empresa sem nome"
                />
              </div>
            </div>
            <div class="row mb-1">
              <div class="col-6 d-flex flex-column align-items-center">
                <label class="label">Logo tema escuro</label>
                <img
                  [src]="configCompany[LOGO_TYPES.logoWhite].url"
                  class="p-3 logo"
                  height="164"
                  alt="Logo da empresa tema escuro"
                />
              </div>
              <div class="col-6 d-flex flex-column align-items-center">
                <label class="label">Logo tema escuro sem nome</label>
                <img
                  [src]="configCompany[LOGO_TYPES.logoWhiteWithoutName].url"
                  class="p-3 logo"
                  height="164"
                  alt="Logo da empresa tema escuro sem nome"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-auto">
          <label class="label-divider">Dados da empresa</label>
        </div>
        <div class="col">
          <hr />
        </div>
      </div>
      <div class="row">
        <div class="col-12 col-md">
          <div class="form-control-group">
            <label class="label" for="input-companyName">Nome da empresa</label>
            <nb-form-field>
              <input
                nbInput
                [(ngModel)]="configCompany.companyName"
                #companyName="ngModel"
                id="input-companyName"
                name="companyName"
                placeholder="Digite o nome da empresa"
                fullWidth
                fieldSize="large"
                [required]="validation.companyName.required"
                [status]="companyName.value ? 'success' : 'basic'"
                [attr.aria-invalid]="companyName.invalid && companyName.touched ? true : null"
              />
            </nb-form-field>
          </div>
        </div>
        <div class="col col-md-auto" style="display: flex; flex-direction: column; justify-content: center">
          <label class="label" for="show-companyName">Mostrar no cabeçalho?</label>
          <nb-toggle
            [(ngModel)]="configCompany.showCompanyName"
            [disabled]="!configCompany.companyName"
            id="show-companyName"
            name="toggle-show-companyName"
          ></nb-toggle>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-address">Endereço</label>
            <input
              nbInput
              [(ngModel)]="configCompany.address"
              #address="ngModel"
              id="input-address"
              name="address"
              placeholder="Av. Dr. Antônio Gouveia, 549 - Pajuçara, Maceió - AL, 57030-170"
              fullWidth
              fieldSize="large"
              [required]="validation.address.required"
              [status]="address.value ? 'success' : 'basic'"
              [attr.aria-invalid]="address.invalid && address.touched ? true : null"
            />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-document">CNPJ</label>
            <input
              nbInput
              [(ngModel)]="configCompany.cnpj"
              #document="ngModel"
              id="input-document"
              name="document"
              placeholder="00.000.000/0000-00"
              fullWidth
              fieldSize="large"
              [brmasker]="{ person: true }"
              ngxSelectAllText
              [required]="validation.cnpj.required"
              [minlength]="validation.document.minLength"
              [status]="document.dirty ? (document.invalid ? 'danger' : 'success') : 'basic'"
              [attr.aria-invalid]="document.invalid && document.touched ? true : null"
            />
            <ng-container *ngIf="document.errors?.minlength">
              <p class="caption status-danger">CNPJ deve ter {{ validation.document.minLength - 4 }} números</p>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-qrcode-url">
              URL do QRCode
              <nb-icon
                status="info"
                icon="info"
                pack="eva"
                [options]="{ animation: { type: 'pulse' } }"
                [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                nbTooltip="Esse é o QRCode que aparece ao fim da visualização do orçamento."
                nbTooltipPlacement="top"
                nbTooltipStatus="info"
              ></nb-icon>
            </label>
            <input
              nbInput
              [(ngModel)]="configCompany.qrcodeURL"
              #qrcodeURL="ngModel"
              id="input-qrcode-url"
              name="qrcodeURL"
              placeholder="http://www.ninc.digital"
              fullWidth
              fieldSize="large"
              [status]="qrcodeURL.value ? 'success' : 'basic'"
              [attr.aria-invalid]="qrcodeURL.invalid && qrcodeURL.touched ? true : null"
            />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-auto">
          <label class="label-divider">Metas da empresa</label>
        </div>
        <div class="col">
          <hr />
        </div>
      </div>
      <div class="row">
        <div class="col-4">
          <div class="form-control-group">
            <label class="label">Acumulado para Organização</label>
            <input
              nbInput
              [(ngModel)]="configCompany.contractsGoal"
              #contractsGoal="ngModel"
              id="input-contractsGoal"
              name="contractsGoal"
              placeholder=8000
              fullWidth
              type="number"
              required="true"
              fieldSize="large"
              [status]="contractsGoal.value ? 'success' : 'basic'"
              [attr.aria-invalid]="contractsGoal.invalid && contractsGoal.touched ? true : null"
            />
          </div>
        </div>
        <div class="col-4">
          <div class="form-control-group">
            <label class="label">Acumulado para Impostos</label>
            <input
              nbInput
              [(ngModel)]="configCompany.taxesGoal"
              #taxesGoal="ngModel"
              id="input-taxesGoal"
              name="taxesMeta"
              placeholder=8000
              fullWidth
              type="number"
              required="true"
              fieldSize="large"
              [status]="taxesGoal.value ? 'success' : 'basic'"
              [attr.aria-invalid]="taxesGoal.invalid && taxesGoal.touched ? true : null"
            />
          </div>
        </div>
        <div class="col-4">
          <div class="form-control-group">
            <label class="label">Ordens de Empenho</label>
            <input
              nbInput
              [(ngModel)]="configCompany.oeGoal"
              #oeGoal="ngModel"
              id="input-oeGoal"
              name="oeGoal"
              placeholder=350000
              fullWidth
              type="number"
              required="true"
              fieldSize="large"
              [status]="oeGoal.value ? 'success' : 'basic'"
              [attr.aria-invalid]="oeGoal.invalid && oeGoal.touched ? true : null"
            />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-auto">
          <label class="label-divider">Redes sociais</label>
        </div>
        <div class="col">
          <hr />
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-youtube-link">Link do YouTube</label>
            <nb-form-field>
              <nb-icon nbPrefix icon="social-youtube" pack="ion"></nb-icon>
              <input
                nbInput
                [(ngModel)]="configCompany.youtubeLink"
                #youtubeLink="ngModel"
                id="input-youtube-link"
                name="youtubeLink"
                placeholder="https://www.youtube.com/"
                fullWidth
                fieldSize="large"
                [status]="youtubeLink.value ? 'success' : 'basic'"
                [attr.aria-invalid]="youtubeLink.invalid && youtubeLink.touched ? true : null"
              />
            </nb-form-field>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-linkedin-link">Link do LinkedIn</label>
            <nb-form-field>
              <nb-icon nbPrefix icon="social-linkedin" pack="ion"></nb-icon>
              <input
                nbInput
                [(ngModel)]="configCompany.linkedinLink"
                #linkedinLink="ngModel"
                id="input-linkedin-link"
                name="linkedinLink"
                placeholder="https://www.linkedin.com/"
                fullWidth
                fieldSize="large"
                [status]="linkedinLink.value ? 'success' : 'basic'"
                [attr.aria-invalid]="linkedinLink.invalid && linkedinLink.touched ? true : null"
              />
            </nb-form-field>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-instagram-link">Link do Instagram</label>
            <nb-form-field>
              <nb-icon nbPrefix icon="social-instagram" pack="ion"></nb-icon>
              <input
                nbInput
                [(ngModel)]="configCompany.instagramLink"
                #instagramLink="ngModel"
                id="input-instagram-link"
                name="instagramLink"
                placeholder="https://www.instagram.com"
                fullWidth
                fieldSize="large"
                [status]="instagramLink.value ? 'success' : 'basic'"
                [attr.aria-invalid]="instagramLink.invalid && instagramLink.touched ? true : null"
              />
            </nb-form-field>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-glassfrog-link">Link do GlassFrog</label>
            <nb-form-field>
              <nb-icon nbPrefix icon="glassfrog" pack="fac"></nb-icon>
              <input
                nbInput
                [(ngModel)]="configCompany.glassfrogLink"
                #glassfrogLink="ngModel"
                id="input-glassfrog-link"
                name="glassfrogLink"
                placeholder="https://www.glassfrog.com"
                fullWidth
                fieldSize="large"
                [status]="glassfrogLink.value ? 'success' : 'basic'"
                [attr.aria-invalid]="glassfrogLink.invalid && glassfrogLink.touched ? true : null"
              />
            </nb-form-field>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-control-group">
            <label class="label" for="input-gathertown-link">Link do Gather Town</label>
            <nb-form-field>
              <nb-icon nbPrefix icon="gtown" pack="fac"></nb-icon>
              <input
                nbInput
                [(ngModel)]="configCompany.gathertownLink"
                #gathertownLink="ngModel"
                id="input-gathertown-link"
                name="gathertownLink"
                placeholder="https://app.gather.town/app"
                fullWidth
                fieldSize="large"
                [status]="gathertownLink.value ? 'success' : 'basic'"
                [attr.aria-invalid]="gathertownLink.invalid && gathertownLink.touched ? true : null"
              />
            </nb-form-field>
          </div>
        </div>
      </div>
    </form>
  </nb-tab>
  <nb-tab [tabTitle]="isPhone() ? '' : 'Despesas'" [tabIcon]="expenseIcon" responsive>
    <form  #expenseConfigForm="ngForm" aria-labelledby="title">
      <div class="row">
        <div class="col-auto">
          <label class="label-divider">
            Despesas{{ clonedConfig.expenseConfig.isDuplicated ? '' : ' administrativas' }}
          </label>
        </div>
        <div class="col">
          <hr />
        </div>
        <div class="col-auto">
          <nb-toggle [(ngModel)]="clonedConfig.expenseConfig.isDuplicated" name="toggle-hide" labelPosition="start">
            Duplicar lista
          </nb-toggle>
        </div>
      </div>
      <div class="row">
        <div class="col-10 col-md-11">
          <div class="form-control-group">
            <label class="label" for="input-admin-type">Tipo de despesa:</label>
            <input
              nbInput
              [(ngModel)]="newAdminExpense.name"
              #adminType="ngModel"
              id="input-admin-type"
              name="adminType"
              placeholder="Nome do tipo da despesa"
              fullWidth
              fieldSize="large"
              [status]="adminType.value ? 'success' : 'basic'"
              [attr.aria-invalid]="adminType.invalid && adminType.touched ? true : null"
            />
          </div>
        </div>
        <div class="col-2 col-md-1">
          <div class="form-control-group">
            <button
              nbButton
              type="button"
              fullWidth
              status="primary"
              size="large"
              style="margin-top: 28px"
              [disabled]="!adminType.value"
              (click)="addExpenseType(configExpenseTypes.ADMINISTRATIVA)"
            >
              <nb-icon status="basic" icon="plus" pack="eva"></nb-icon>
            </button>
          </div>
        </div>
      </div>
      <nb-list style="width: 100%; padding: 10px 0">
        <nb-list-item *ngFor="let eType of adminExpenseTypes; let i = index; trackBy: trackByIndex">
          <div class="row typeRow">
            <div class="col-9 col-md-11">
              <input
                nbInput
                [(ngModel)]="eType.name"
                id="input-expense-type-{{ i }}"
                name="expense-type-{{ i }}"
                fullWidth
                [status]="adminExpenseTypes[i].name.length == 0 ? 'danger' : 'basic'"
                [readonly]="validation.adminExpenseType.readonly"
                [required]="validation.adminExpenseType.required"
              />
              <nb-list class="subtypes-list" *ngIf="eType.subTypes.length > 0">
                <nb-list-item *ngFor="let subType of eType.subTypes; let j = index; trackBy: trackByIndex">
                  <div class="row typeRow">
                    <div class="col-10 col-md-11">
                      <input
                        nbInput
                        [(ngModel)]="eType.subTypes[j].name"
                        id="input-subtype-{{ i }}-{{ j }}"
                        name="subtype-{{ i }}-{{ j }}"
                        placeholder="Nome do subtipo da despesa"
                        fullWidth
                        [status]="eType.subTypes[j].name.length == 0 ? 'danger' : 'basic'"
                        [readonly]="!eType.subTypes[j].isNew"
                        [required]="validation.adminExpenseSubType.required"
                      />
                    </div>
                    <div class="col-2 col-md-1" style="text-align: right">
                      <nb-icon
                        class="xIcon"
                        status="basic"
                        icon="trash-2-outline"
                        pack="eva"
                        (click)="eType.subTypes.splice(j, 1); isFormDirty.next(true)"
                        [options]="{ animation: { type: 'shake' } }"
                      ></nb-icon>
                    </div>
                  </div>
                </nb-list-item>
              </nb-list>
            </div>
            <div class="col-3 col-md-1" style="text-align: right">
              <nb-icon
                class="addIcon"
                status="basic"
                icon="plus-outline"
                pack="eva"
                (click)="
                  eType.subTypes.push({
                    name: '',
                    isNew: true
                  })
                "
                [options]="{ animation: { type: 'pulse' } }"
                nbTooltip="Adicionar subtipo da despesa"
                nbTooltipPlacement="top"
                nbTooltipStatus="info"
              ></nb-icon>
              <nb-icon
                class="xIcon"
                status="basic"
                icon="trash-2-outline"
                pack="eva"
                (click)="adminExpenseTypes.splice(i, 1); isFormDirty.next(true)"
                [options]="{ animation: { type: 'shake' } }"
              ></nb-icon>
            </div>
          </div>
        </nb-list-item>
      </nb-list>
      <ng-container *ngIf="!clonedConfig.expenseConfig.isDuplicated">
        <div class="row">
          <div class="col-auto">
            <label class="label-divider">
              Despesas de contratos
              <nb-icon
                status="info"
                icon="info"
                pack="eva"
                [options]="{ animation: { type: 'pulse' } }"
                nbTooltip="Aporte e Comissão sempre fazem parte da lista."
                nbTooltipPlacement="top"
                nbTooltipStatus="info"
              ></nb-icon>
            </label>
          </div>
          <div class="col">
            <hr />
          </div>
        </div>
        <div class="row">
          <div class="col-10 col-md-11">
            <div class="form-control-group">
              <label class="label" for="input-contract-type">Tipo de despesa:</label>
              <input
                nbInput
                [(ngModel)]="newContractExpense.name"
                #contractType="ngModel"
                id="input-contract-type"
                name="contractType"
                placeholder="Nome do tipo da despesa"
                fullWidth
                fieldSize="large"
                [status]="contractType.value ? 'success' : 'basic'"
                [attr.aria-invalid]="contractType.invalid && contractType.touched ? true : null"
              />
            </div>
          </div>
          <div class="col-2 col-md-1">
            <div class="form-control-group">
              <button
                nbButton
                type="button"
                fullWidth
                status="primary"
                size="large"
                style="margin-top: 28px"
                [disabled]="!contractType.value"
                (click)="addExpenseType(configExpenseTypes.CONTRATO)"
              >
                <nb-icon status="basic" icon="plus" pack="eva"></nb-icon>
              </button>
            </div>
          </div>
          <hr />
        </div>
        <nb-list style="width: 100%; padding: 10px 0">
          <nb-list-item *ngFor="let eType of contractExpenseTypes; let i = index; trackBy: trackByIndex">
            <div class="row typeRow">
              <div class="col-9 col-md-11">
                <input
                  nbInput
                  [(ngModel)]="eType.name"
                  id="input-expense-type-{{ i }}"
                  name="expense-type-{{ i }}"
                  fullWidth
                  [status]="contractExpenseTypes[i].name.length == 0 ? 'danger' : 'basic'"
                  [readonly]="validation.contractExpenseType.readonly"
                  [required]="validation.contractExpenseType.required"
                />
                <nb-list class="subtypes-list" *ngIf="eType.subTypes.length > 0">
                  <nb-list-item *ngFor="let subType of eType.subTypes; let j = index; trackBy: trackByIndex">
                    <div class="row typeRow">
                      <div class="col-10 col-md-11">
                        <input
                          nbInput
                          [(ngModel)]="eType.subTypes[j].name"
                          id="input-subtype-{{ i }}-{{ j }}"
                          name="subtype-{{ i }}-{{ j }}"
                          placeholder="Nome do subtipo da despesa"
                          fullWidth
                          [status]="eType.subTypes[j].name.length == 0 ? 'danger' : 'basic'"
                          [readonly]="!eType.subTypes[j].isNew"
                          [required]="validation.contractExpenseSubType.required"
                        />
                      </div>
                      <div class="col-2 col-md-1" style="text-align: right">
                        <nb-icon
                          class="xIcon"
                          status="basic"
                          icon="trash-2-outline"
                          pack="eva"
                          (click)="eType.subTypes.splice(j, 1); isFormDirty.next(true)"
                          [options]="{ animation: { type: 'shake' } }"
                        ></nb-icon>
                      </div>
                    </div>
                  </nb-list-item>
                </nb-list>
              </div>
              <div class="col-3 col-md-1" style="text-align: right">
                <nb-icon
                  class="addIcon"
                  status="basic"
                  icon="plus-outline"
                  pack="eva"
                  (click)="
                    eType.subTypes.push({
                      name: '',
                      isNew: true
                    })
                  "
                  [options]="{ animation: { type: 'pulse' } }"
                  nbTooltip="Adicionar subtipo da despesa"
                  nbTooltipPlacement="top"
                  nbTooltipStatus="info"
                ></nb-icon>
                <nb-icon
                  *ngIf="eType.name != EXPENSE_TYPES.COMISSAO && eType.name != EXPENSE_TYPES.APORTE"
                  class="xIcon"
                  status="basic"
                  icon="trash-2-outline"
                  pack="eva"
                  (click)="contractExpenseTypes.splice(i, 1); isFormDirty.next(true)"
                  [options]="{ animation: { type: 'shake' } }"
                ></nb-icon>
              </div>
            </div>
          </nb-list-item>
        </nb-list>
      </ng-container>
    </form>
  </nb-tab>
  <nb-tab tabId="invoice-tab" [tabTitle]="isPhone() ? '' : 'Orçamentos'" [tabIcon]="invoiceIcon" responsive>
    <form  #invoiceConfigForm="ngForm" aria-labelledby="title">
      <div class="row">
        <div class="toggle-list col-12 col-lg-auto">
          <div class="form-control-group">
            <table class="table-invoice">
              <tbody>
                <tr>
                  <td class="td-left">Tipo de orçamento</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasType"
                      name="toggle-type"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Cabeçalho</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasHeader"
                      name="toggle-header"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Lista de colaboradores</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasTeam"
                      name="toggle-team"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Lista de fornecedores</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasProvider"
                      name="toggle-provider"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Etapa preliminar</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasPreliminary"
                      name="toggle-stage-preliminary"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Etapa executiva</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasExecutive"
                      name="toggle-stage-executive"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Etapa complementar</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasComplementary"
                      name="toggle-stage-complementary"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Parcelamentos</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasStageName"
                      name="toggle-stage-name"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Importantes</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasImportants"
                      name="toggle-importants"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Lista de materiais</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.invoiceConfig.hasMaterialList"
                      name="toggle-material-list"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-12 col-lg">
          <div class="row" style="align-items: end">
            <div class="col-12">
              <div class="form-control-group">
                <label class="label" for="input-code-abbreviation">
                  Sigla do código
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    nbTooltip="Por exemplo, caso a sigla seja ABC, o código será ORC-00/2022-ABC/*SIGLA-DO-TIME*-00"
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.invoiceConfig.codeAbbreviation"
                  #codeAbbreviation="ngModel"
                  id="input-code-abbreviation"
                  name="codeAbbreviation"
                  fullWidth
                  fieldSize="large"
                  placeholder="Sigla do código"
                  [status]="codeAbbreviation.dirty ? (codeAbbreviation.invalid ? 'danger' : 'success') : 'basic'"
                  [required]="validation.abbreviation.required"
                  [minlength]="validation.abbreviation.minLength"
                  [attr.aria-invalid]="codeAbbreviation.invalid && codeAbbreviation.touched ? true : null"
                  (focusout)="
                    clonedConfig.invoiceConfig.codeAbbreviation =
                      clonedConfig.invoiceConfig.codeAbbreviation.toUpperCase()
                  "
                />
                <ng-container *ngIf="codeAbbreviation.invalid && codeAbbreviation.touched">
                  <p class="caption status-danger" *ngIf="codeAbbreviation.errors?.required">A sigla é obrigatória!</p>
                  <p class="caption status-danger" *ngIf="codeAbbreviation.errors?.minlength">
                    A abreviação deve conter pelo menos {{ validation.codeAbbreviation.minLength }} caracteres
                  </p>
                </ng-container>
              </div>
            </div>
            <div class="form-control-group col-12">
              <div class="row mt-2">
                <div class="col-auto">
                  <label class="label-divider">Taxas para Suporte Empresarial</label>
                </div>
                <div class="col">
                  <hr />
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <label class="label" for="input-support-org-percentage">Porcentagem da organização</label>
                  <input
                    nbInput
                    [(ngModel)]="clonedConfig.invoiceConfig.businessFees.support.organizationPercentage"
                    #supportOrgPercentage="ngModel"
                    id="input-support-org-percentage"
                    name="supportOrgPercentage"
                    placeholder="Porcentagem"
                    fullWidth
                    fieldSize="large"
                    [brmasker]="{
                      money: true,
                      thousand: '.',
                      decimalCaracter: ',',
                      decimal: 2
                    }"
                    ngxSelectAllText
                    [status]="
                      supportOrgPercentage.dirty ? (supportOrgPercentage.invalid ? 'danger' : 'success') : 'basic'
                    "
                    [required]="validation.orgPercentage.required"
                    [attr.aria-invalid]="supportOrgPercentage.invalid && supportOrgPercentage.touched ? true : null"
                  />
                </div>
                <div class="col-6">
                  <label class="label" for="input-support-nf-percentage">Porcentagem da nota fiscal</label>
                  <input
                    nbInput
                    [(ngModel)]="clonedConfig.invoiceConfig.businessFees.support.nfPercentage"
                    #supportNfPercentage="ngModel"
                    id="input-support-nf-percentage"
                    name="supportNfPercentage"
                    placeholder="Porcentagem"
                    fullWidth
                    fieldSize="large"
                    [brmasker]="{
                      money: true,
                      thousand: '.',
                      decimalCaracter: ',',
                      decimal: 2
                    }"
                    ngxSelectAllText
                    [status]="
                      supportNfPercentage.dirty ? (supportNfPercentage.invalid ? 'danger' : 'success') : 'basic'
                    "
                    [required]="validation.nfPercentage.required"
                    [attr.aria-invalid]="supportNfPercentage.invalid && supportNfPercentage.touched ? true : null"
                  />
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-auto">
                  <label class="label-divider">Taxas para Intermediação de Negócios</label>
                </div>
                <div class="col">
                  <hr />
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <label class="label" for="input-intermediation-org-percentage">Porcentagem da organização</label>
                  <input
                    nbInput
                    [(ngModel)]="clonedConfig.invoiceConfig.businessFees.intermediation.organizationPercentage"
                    #intermediationOrgPercentage="ngModel"
                    id="input-intermediation-org-percentage"
                    name="intermediationOrgPercentage"
                    placeholder="Porcentagem"
                    fullWidth
                    fieldSize="large"
                    [brmasker]="{
                      money: true,
                      thousand: '.',
                      decimalCaracter: ',',
                      decimal: 2
                    }"
                    ngxSelectAllText
                    [status]="
                      intermediationOrgPercentage.dirty
                        ? intermediationOrgPercentage.invalid
                          ? 'danger'
                          : 'success'
                        : 'basic'
                    "
                    [required]="validation.orgPercentage.required"
                    [attr.aria-invalid]="
                      intermediationOrgPercentage.invalid && intermediationOrgPercentage.touched ? true : null
                    "
                  />
                </div>
                <div class="col-6">
                  <label class="label" for="input-intermediation-nf-percentage">Porcentagem da nota fiscal</label>
                  <input
                    nbInput
                    [(ngModel)]="clonedConfig.invoiceConfig.businessFees.intermediation.nfPercentage"
                    #intermediationNfPercentage="ngModel"
                    id="input-nf-percentage"
                    name="intermediationNfPercentage"
                    placeholder="Porcentagem"
                    fullWidth
                    fieldSize="large"
                    [brmasker]="{
                      money: true,
                      thousand: '.',
                      decimalCaracter: ',',
                      decimal: 2
                    }"
                    ngxSelectAllText
                    [status]="
                      intermediationNfPercentage.dirty
                        ? intermediationNfPercentage.invalid
                          ? 'danger'
                          : 'success'
                        : 'basic'
                    "
                    [required]="validation.nfPercentage.required"
                    [attr.aria-invalid]="
                      intermediationNfPercentage.invalid && intermediationNfPercentage.touched ? true : null
                    "
                  />
                </div>
              </div>
            </div>
            <div class="col-12 mt-2">
              <div class="row">
                <div class="col-auto">
                  <label class="label-divider">Lista de unidade de medidas para unidade de produtos</label>
                </div>
                <div class="col">
                  <hr />
                </div>
              </div>
              <div class="row">
                <div class="col-10 col-md-11">
                  <div class="form-control-group">
                    <label class="label" for="metric-input">Nome da unidade</label>
                    <input
                      nbInput
                      [(ngModel)]="newUnit"
                      #metric="ngModel"
                      id="metric-input"
                      name="metric"
                      placeholder="Nome da unidade"
                      fullWidth
                      fieldSize="large"
                      [status]="metric.value ? 'success' : 'basic'"
                      [attr.aria-invalid]="metric.invalid && metric.touched ? true : null"
                    />
                  </div>
                </div>
                <div class="col-2 col-md-1">
                  <div class="form-control-group">
                    <button
                      nbButton
                      type="button"
                      fullWidth
                      status="primary"
                      size="large"
                      style="margin-top: 28px"
                      [disabled]="!metric.value"
                      (click)="addUnit()"
                    >
                      <nb-icon status="basic" icon="plus" pack="eva"></nb-icon>
                    </button>
                  </div>
                </div>
                <hr />
              </div>
            </div>
          </div>
          <nb-list style="width: 100%; padding: 10px 0">
            <nb-list-item *ngFor="let unit of clonedConfig.invoiceConfig.units; let i = index; trackBy: trackByIndex">
              <div class="row typeRow">
                <div class="col-9 col-md-11">
                  <input
                    nbInput
                    [(ngModel)]="clonedConfig.invoiceConfig.units[i]"
                    id="metric-input{{ i }}"
                    name="metric-{{ i }}"
                    fullWidth
                    [status]="clonedConfig.invoiceConfig.units.length == 0 ? 'danger' : 'basic'"
                    [readonly]="true"
                  />
                </div>
                <div class="col-3 col-md-1">
                  <nb-icon
                    class="xIcon"
                    status="basic"
                    icon="trash-2-outline"
                    pack="eva"
                    (click)="deleteUnit(i)"
                    [options]="{ animation: { type: 'shake' } }"
                  ></nb-icon>
                </div>
              </div>
            </nb-list-item>
          </nb-list>
          <div class="row">
            <div class="col-12 mt-2">
              <div class="row">
                <div class="col-auto">
                  <label class="label-divider">
                    Fonte e cores
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Altera somente os textos na seção de Descrição do serviço e Importante"
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </label>
                </div>
                <div class="col">
                  <hr />
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <label class="label" for="important-block-font-color">Cor da fonte</label>
              <nb-radio-group
                class="d-flex"
                name="important-block-font-color"
                [(ngModel)]="clonedConfig.invoiceConfig.importantBlockFontColor"
              >
                <nb-radio [value]="AVALIABLE_TEXT_COLORS.white">Branco</nb-radio>
                <nb-radio [value]="AVALIABLE_TEXT_COLORS.black">Preto</nb-radio>
              </nb-radio-group>
            </div>
            <div class="col">
              <label class="label" for="important-block-font-weight">Peso da fonte</label>
              <nb-toggle
                class="d-flex"
                [(ngModel)]="clonedConfig.invoiceConfig.isImportantBlockFontBold"
                status="basic"
                name="important-block-font-weight"
              >
                Negrito
              </nb-toggle>
            </div>
          </div>
          <div class="row">
            <div class="col-12 mt-2">
              <div class="row">
                <div class="col-auto">
                  <label class="label-divider">
                    Logo de suporte
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="A imagem deve ter no máximo um tamanho de 200 X 200"
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </label>
                </div>
                <div class="col">
                  <hr />
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-md-6">
              <div class="form-control-group">
                <label class="label" for="input-logo-support">Arquivo da logo do suporte</label>
                <div class="d-flex">
                  <button
                    class="mr-2"
                    nbButton
                    type="button"
                    status="primary"
                    (click)="openUploadDialog(LOGO_TYPES.logoSupport)"
                  >
                    <nb-icon nbPrefix icon="attach-2-outline" pack="eva"></nb-icon>
                  </button>
                  <input
                    nbInput
                    [(ngModel)]="configCompany[LOGO_TYPES.logoSupport].name"
                    #supportLogo="ngModel"
                    id="input-logo-support"
                    name="logo-support"
                    fullWidth
                    fieldSize="large"
                    readonly
                  />
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="row mb-1">
                <div class="col-6 d-flex flex-column align-items-center">
                  <label class="label">Logo do suporte</label>
                  <img
                    [src]="configCompany[LOGO_TYPES.logoSupport].url"
                    class="p-3 logo"
                    height="164"
                    alt="Logo do suporte do orçamento"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </nb-tab>
  <nb-tab tabId="profile-tab" [tabTitle]="isPhone() ? '' : 'Perfil'" tabIcon="person-outline" responsive>
    <form  #profileConfigForm="ngForm" aria-labelledby="title">
      <div class="row">
        <div class="toggle-list col-12 col-lg-auto">
          <div class="form-control-group">
            <table class="table-profile">
              <tbody>
                <tr>
                  <td class="td-left">Cargos</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.profileConfig.hasLevels"
                      name="toggle-levels"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Lista de times</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.profileConfig.hasTeam"
                      name="toggle-team"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Lista de setores</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.profileConfig.hasSector"
                      name="toggle-sector"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Perfil de atuação</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.profileConfig.hasExpertiseBySector"
                      name="toggle-expertise-profile"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-12 col-lg">
          <div class="row" style="margin-top: 8px">
            <div class="col-auto">
              <label class="label-divider">Lista de papéis</label>
            </div>
            <div class="col">
              <hr />
            </div>
          </div>
          <div class="row" style="align-items: end">
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-role-type">Tipo de papel:</label>
                <input
                  nbInput
                  [(ngModel)]="newRole.roleTypeName"
                  #roleType="ngModel"
                  id="input-role-type"
                  name="roleType"
                  placeholder="Nome do papel"
                  fullWidth
                  fieldSize="large"
                  [status]="newRole.roleTypeName && newRole.permission ? 'success' : 'basic'"
                  [attr.aria-invalid]="roleType.invalid && roleType.touched ? true : null"
                />
                <ng-container *ngIf="errorInPositions">
                  <p class="caption status-danger" style="position: absolute">
                    Já há um papel com este nome na lista de papéis!
                  </p>
                </ng-container>
              </div>
            </div>
            <div class="col-10 col-lg-4">
              <div class="form-control-group">
                <label class="label" for="input-permission-selector">Recursos:</label>
                <nb-select
                  [(ngModel)]="untreatedPermissionsAddition"
                  #permissionType="ngModel"
                  id="input-permission-selector"
                  name="permissionType"
                  placeholder="Selecione o recurso"
                  fullWidth
                  multiple
                  size="large"
                  [status]="newRole.roleTypeName && newRole.permission ? 'success' : 'basic'"
                  [attr.aria-invalid]="permissionType.invalid && permissionType.touched ? true : null"
                >
                  <nb-option-group  *ngFor="let module of MODULES; let i = index" [title]='module.toUpperCase()'>
                    <nb-option *ngFor="let resource of RESOURCES[i]" [value]="[module, resource]">
                      {{ resource }}
                    </nb-option>
                  </nb-option-group>
                </nb-select>
              </div>
            </div>
            <div class="col-2">
              <div class="form-control-group">
                <button
                  nbButton
                  type="button"
                  fullWidth
                  status="primary"
                  size="large"
                  [disabled]="!newRole.roleTypeName || !newRole.permission"
                  (click)="addRole()"
                >
                  <nb-icon status="basic" icon="plus" pack="eva"></nb-icon>
                </button>
              </div>
            </div>
          </div>
          <nb-list style="width: 100%; padding: 10px 0">
            <nb-list-item
              *ngFor="let position of clonedConfig.profileConfig.positions; let i = index; trackBy: trackByIndex"
            >
              <div class="row typeRow">
                <div class="col-9 col-lg-6" style="margin: 5px 5px">
                  <input
                    nbInput
                    [(ngModel)]="position.roleTypeName"
                    id="input-role-type-{{ i }}"
                    name="role-type-{{ i }}"
                    placeholder="Nome do papel"
                    fullWidth
                    [nbTooltipTrigger]="!getTooltipText(i, KEYS_TO_VERIFY.POSITION).getValue() ? tooltipTriggers.NOOP : tooltipTriggers.HOVER"
                    [nbTooltip]="getTooltipText(i, KEYS_TO_VERIFY.POSITION).getValue()"
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                    [disabled]="!!getTooltipText(i, KEYS_TO_VERIFY.POSITION).getValue()"
                    [status]="!position.roleTypeName ? 'danger' : 'basic'"
                    [required]="validation.roleTypeName.required"
                    [readonly]="validation.roleTypeName.readyonly"
                  />
                </div>
                <div class="col-9 col-lg-4" style="margin-left: 5px">
                  <nb-select
                    [(ngModel)]="untreatedPermissionsEditing[i]"
                    (selectedChange)="position.permission = treatPermissions(untreatedPermissionsEditing[i])"
                    #permissionType="ngModel"
                    id="input-permission-type-{{ i }}"
                    name="permission-type-{{ i }}"
                    placeholder="Selecione o recurso"
                    fullWidth
                    [compareWith]="comparePermissions"
                    multiple
                    [status]="!position.permission ? 'danger' : 'basic'"
                    [required]="validation.permissionType.required"
                  >
                  <nb-option-group  *ngFor="let module of MODULES; let j = index" [title]='module.toUpperCase()'>
                    <nb-option *ngFor="let resource of RESOURCES[j]" [value]="[module, resource]">
                      {{ resource }}
                    </nb-option>
                  </nb-option-group>
                  </nb-select>
                </div>
                <div class="trash col-2 col-lg-1">
                  <nb-icon
                    class="xIcon"
                    status="basic"
                    icon="trash-2-outline"
                    pack="eva"
                    (click)="deletePositionOrLevel(i, KEYS_TO_VERIFY.POSITION)"
                    [options]="{ animation: { type: 'shake' } }"
                  ></nb-icon>
                </div>
              </div>
            </nb-list-item>
          </nb-list>
          <div class="row" style="margin-top: 8px">
            <div class="col-auto">
              <label class="label-divider">Lista de cargos</label>
            </div>
            <div class="col">
              <hr />
            </div>
          </div>
          <div class="row" style="align-items: end">
            <div class="col-10">
              <div class="form-control-group">
                <label class="label" for="input-levels-type">Tipo de cargo:</label>
                <input
                  nbInput
                  [(ngModel)]="newLevel"
                  #levelType="ngModel"
                  id="input-levels-type"
                  name="levelsType"
                  placeholder="Nome do tipo de cargo"
                  fullWidth
                  fieldSize="large"
                  [status]="newLevel ? 'success' : 'basic'"
                  [attr.aria-invalid]="levelType.invalid && levelType.touched ? true : null"
                />
                <ng-container *ngIf="errorInLevels">
                  <p class="caption status-danger" style="position: absolute">Já há um cargo com este nome!</p>
                </ng-container>
              </div>
            </div>
            <div class="col-2">
              <div class="form-control-group">
                <button
                  nbButton
                  type="button"
                  fullWidth
                  status="primary"
                  size="large"
                  [disabled]="!newLevel"
                  (click)="addLevel()"
                >
                  <nb-icon status="basic" icon="plus" pack="eva"></nb-icon>
                </button>
              </div>
            </div>
            <hr />
          </div>
          <nb-list style="width: 100%; padding: 10px 0">
            <nb-list-item *ngFor="let level of clonedConfig.profileConfig.levels; let i = index; trackBy: trackByIndex">
              <div class="row typeRow">
                <div class="col-10">
                  <input
                    nbInput
                    [(ngModel)]="clonedConfig.profileConfig.levels[i]"
                    id="input-level-type-{{ i }}"
                    name="level-type-{{ i }}"
                    fullWidth
                    [status]="clonedConfig.profileConfig.levels[i].length == 0 ? 'danger' : 'basic'"
                    [required]="validation.levels.required"
                    [readonly]="validation.levels.readyonly"
                  />
                </div>
                <div class="col-2">
                  <nb-icon
                    class="xIcon"
                    status="basic"
                    icon="trash-2-outline"
                    pack="eva"
                    (click)="deletePositionOrLevel(i, KEYS_TO_VERIFY.LEVEL)"
                    [options]="{ animation: { type: 'shake' } }"
                  ></nb-icon>
                </div>
              </div>
            </nb-list-item>
          </nb-list>
        </div>
      </div>
    </form>
  </nb-tab>
  <nb-tab tabId="modules-tab" [tabTitle]="isPhone() ? '' : 'Módulos Extras'" tabIcon="cube-outline" responsive>
    <form  #moduleConfigForm="ngForm" aria-labelledby="title">
      <div class="row">
        <div class="toggle-list col-12 col-lg-auto">
          <div class="form-control-group">
            <table class="table-modules">
              <tbody>
                <tr>
                  <td class="td-left">Módulo de promoções</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.modulesConfig.hasPromotion"
                      name="toggle-header"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td class="td-left">Módulo de cursos</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.modulesConfig.hasCourse"
                      name="toggle-type"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </form>
  </nb-tab>
  <nb-tab tabId="onedrive-tab" [tabTitle]="isPhone() ? '' : 'OneDrive'" [tabIcon]="onedriveIcon" responsive>
    <form  #onedriveConfigForm="ngForm" aria-labelledby="title">
      <div class="row">
        <div class="toggle-list col-12 col-lg-auto">
          <div class="form-control-group">
            <table class="table-onedrive">
              <tbody>
                <tr>
                  <td class="td-left">OneDrive</td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.oneDriveConfig.isActive"
                      #toggleoneDrive="ngModel"
                      name="toggle-onedrive"
                      labelPosition="start"
                      required="true"
                    ></nb-toggle>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-12 col-lg">
          <div class="row">
            <div class="col-auto">
              <label class="label-divider">Pasta compartilhada contratos</label>
            </div>
            <div class="col">
              <hr />
            </div>
          </div>
          <div class="row" style="align-items: end">
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-onedrive-id">
                  Id do OneDrive
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                    nbTooltip="Para pegar o id da pasta compartilhada do OneDrive:
1-Abra o OneDrive;
2-Vá no menu dos itens compartilhados;
3-Por fim, escolha sua pasta.
4-Na url,como por exemplo https://onedrive.live.com/?id=AAAAAAAAAAAAAA%21BBBBB&cid=AAAAAAAAAAAAAA, o id do OneDrive está na posição dos valores AAAAAAAAAAAAAA."
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.oneDriveConfig.contracts.oneDriveId"
                  #oneDriveIdOfContracts="ngModel"
                  id="input-onedrive-id"
                  name="oneDriveIdOfContracts"
                  placeholder="Id do OneDrive"
                  fullWidth
                  fieldSize="large"
                  [required]="validation.oneDriveId.required"
                  [status]="
                    oneDriveIdOfContracts.dirty ? (oneDriveIdOfContracts.invalid ? 'danger' : 'success') : 'basic'
                  "
                  [attr.aria-invalid]="oneDriveIdOfContracts.invalid && oneDriveIdOfContracts.touched ? true : null"
                  [disabled]="!toggleoneDrive.value"
                />
              </div>
            </div>
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-folder-id">
                  Id da pasta compartilhada
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                    nbTooltip="Para pegar o id da pasta compartilhada do OneDrive:
1-Abra o OneDrive;
2-Vá no menu dos itens compartilhados da esquerda;
3-Por fim, escolha sua pasta.
4-Na url,como por exemplo https://onedrive.live.com/?id=AAAAAAAAAAAAAA%21BBBBB&cid=AAAAAAAAAAAAAA, o id da pasta compartilhada está na posição dos valores BBBBB."
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.oneDriveConfig.contracts.folderId"
                  #folderIdOfContracts="ngModel"
                  id="input-folder-id"
                  name="folderIdOfContracts"
                  fullWidth
                  fieldSize="large"
                  placeholder="id da pasta compatilhada"
                  [required]="validation.oneDriveFolderId.required"
                  [status]="folderIdOfContracts.dirty ? (folderIdOfContracts.invalid ? 'danger' : 'success') : 'basic'"
                  [attr.aria-invalid]="folderIdOfContracts.invalid && folderIdOfContracts.touched ? true : null"
                  [disabled]="!toggleoneDrive.value"
                />
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-auto">
              <label class="label-divider">Pasta compartilhada para os anexos dos fornecedores</label>
            </div>
            <div class="col">
              <hr />
            </div>
          </div>
          <div class="row" style="align-items: end">
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-onedrive-id">
                  Id do OneDrive
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                    nbTooltip="Para pegar o id da pasta compartilhada do OneDrive:
1-Abra o OneDrive;
2-Vá no menu dos itens compartilhados;
3-Por fim, escolha sua pasta.
4-Na url,como por exemplo https://onedrive.live.com/?id=AAAAAAAAAAAAAA%21BBBBB&cid=AAAAAAAAAAAAAA, o id do OneDrive está na posição dos valores AAAAAAAAAAAAAA."
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.oneDriveConfig.providerFiles.oneDriveId"
                  #oneDriveIdOfProviders="ngModel"
                  id="input-onedrive-id"
                  name="oneDriveIdOfProviders"
                  placeholder="Id do OneDrive"
                  fullWidth
                  fieldSize="large"
                  [required]="validation.oneDriveId.required"
                  [status]="
                    oneDriveIdOfProviders.dirty ? (oneDriveIdOfProviders.invalid ? 'danger' : 'success') : 'basic'
                  "
                  [attr.aria-invalid]="oneDriveIdOfProviders.invalid && oneDriveIdOfProviders.touched ? true : null"
                  [disabled]="!toggleoneDrive.value"
                />
              </div>
            </div>
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-folder-id">
                  Id da pasta compartilhada
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                    nbTooltip="Para pegar o id da pasta compartilhada do OneDrive:
1-Abra o OneDrive;
2-Vá no menu dos itens compartilhados da esquerda;
3-Por fim, escolha sua pasta.
4-Na url,como por exemplo https://onedrive.live.com/?id=AAAAAAAAAAAAAA%21BBBBB&cid=AAAAAAAAAAAAAA, o id da pasta compartilhada está na posição dos valores BBBBB."
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.oneDriveConfig.providerFiles.folderId"
                  #folderIdOfProviders="ngModel"
                  id="input-folder-id"
                  name="folderIdOfProviders"
                  fullWidth
                  fieldSize="large"
                  placeholder="id da pasta compatilhada"
                  [required]="validation.oneDriveFolderId.required"
                  [status]="folderIdOfProviders.dirty ? (folderIdOfProviders.invalid ? 'danger' : 'success') : 'basic'"
                  [attr.aria-invalid]="folderIdOfProviders.invalid && folderIdOfProviders.touched ? true : null"
                  [disabled]="!toggleoneDrive.value"
                />
              </div>
            </div>
          </div>
           <div class="row">
            <div class="col-auto">
              <label class="label-divider">Pasta compartilhada para os anexos de transações de times</label>
            </div>
            <div class="col">
              <hr />
            </div>
          </div>
          <div class="row" style="align-items: end">
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-onedrive-id">
                  Id do OneDrive
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                    nbTooltip="Para pegar o id da pasta compartilhada do OneDrive:
1-Abra o OneDrive;
2-Vá no menu dos itens compartilhados;
3-Por fim, escolha sua pasta.
4-Na url,como por exemplo https://onedrive.live.com/?id=AAAAAAAAAAAAAA%21BBBBB&cid=AAAAAAAAAAAAAA, o id do OneDrive está na posição dos valores AAAAAAAAAAAAAA."
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.oneDriveConfig.teamTransactions.oneDriveId"
                  #oneDriveIdOfTeams="ngModel"
                  id="input-onedrive-id"
                  name="oneDriveIdOfTeams"
                  placeholder="Id do OneDrive"
                  fullWidth
                  fieldSize="large"
                  [required]="validation.oneDriveId.required"
                  [status]="
                    oneDriveIdOfTeams.dirty ? (oneDriveIdOfTeams.invalid ? 'danger' : 'success') : 'basic'
                  "
                  [attr.aria-invalid]="oneDriveIdOfTeams.invalid && oneDriveIdOfTeams.touched ? true : null"
                  [disabled]="!toggleoneDrive.value"
                />
              </div>
            </div>
            <div class="col-12 col-lg-6">
              <div class="form-control-group">
                <label class="label" for="input-folder-id">
                  Id da pasta compartilhada
                  <nb-icon
                    status="info"
                    icon="info"
                    pack="eva"
                    [options]="{ animation: { type: 'pulse' } }"
                    [nbTooltipTrigger]="isPhone() ? tooltipTriggers.NOOP : tooltipTriggers.HINT"
                    nbTooltip="Para pegar o id da pasta compartilhada do OneDrive:
1-Abra o OneDrive;
2-Vá no menu dos itens compartilhados da esquerda;
3-Por fim, escolha sua pasta.
4-Na url,como por exemplo https://onedrive.live.com/?id=AAAAAAAAAAAAAA%21BBBBB&cid=AAAAAAAAAAAAAA, o id da pasta compartilhada está na posição dos valores BBBBB."
                    nbTooltipPlacement="top"
                    nbTooltipStatus="info"
                  ></nb-icon>
                </label>
                <input
                  nbInput
                  [(ngModel)]="clonedConfig.oneDriveConfig.teamTransactions.folderId"
                  #folderIdOfTeams="ngModel"
                  id="input-folder-id"
                  name="folderIdOfTeams"
                  fullWidth
                  fieldSize="large"
                  placeholder="id da pasta compatilhada"
                  [required]="validation.oneDriveFolderId.required"
                  [status]="folderIdOfTeams.dirty ? (folderIdOfTeams.invalid ? 'danger' : 'success') : 'basic'"
                  [attr.aria-invalid]="folderIdOfTeams.invalid && folderIdOfTeams.touched ? true : null"
                  [disabled]="!toggleoneDrive.value"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </nb-tab>
  <nb-tab tabId="notification-tab" [tabTitle]="isPhone() ? '' : 'Notificação'" tabIcon="bell-outline" responsive>
    <form  #notificationConfigForm="ngForm" aria-labelledby="title">
      <div class="row">
        <div class="col-12 col-lg-auto" style="margin-bottom: 11px; height: auto">
          <div class="form-control-group">
            <table class="table-notification">
              <thead>
                <tr>
                  <th>Notificações</th>
                  <th>Plataforma</th>
                  <th>Email</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Fechamento de Contrato
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar todos na plataforma e tocar o som do sino. Também notificar o time para revisar as informações do contrato."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.contractClosed.platform"
                      #notificationContractClosedPlatform="ngModel"
                      name="notification-contract-closed-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.contractClosed.email"
                      #notificationContractClosedEmail="ngModel"
                      name="notification-contract-closed-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Parcelas das Ordens de Empenho
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar o gestor do contrato quando faltar 3 dias e a cada 3 dias de atraso da criação da OE daquela parcela."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.receiptDue.platform"
                      #notificationReceiptDuePlatform="ngModel"
                      name="notification-receipt-due-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.receiptDue.email"
                      #notificationReceiptDueEmail="ngModel"
                      name="notification-receipt-due-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Movimentação criada
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar setor financeiro ao criar uma Ordem de Empenho, Pagemento ou Despesa."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.transactionCreated.platform"
                      #notificationTransactionCreatedPlatform="ngModel"
                      name="notification-transaction-created-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.transactionCreated.email"
                      #notificationTransactionCreatedEmail="ngModel"
                      name="notification-transaction-created-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Movimentação paga
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar gestor quando uma Ordem de Empenho, Pagemento ou Despesa for paga."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.transactionPaid.platform"
                      #notificationTransactionPaidPlatform="ngModel"
                      name="notification-transaction-paid-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.transactionPaid.email"
                      #notificationTransactionPaidEmail="ngModel"
                      name="notification-transaction-paid-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Usuário mencionado
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar usuário que foi mencionado em um comentário na aba de gestão do contrato."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.userMentioned.platform"
                      #notificationUserMentionedPlatform="ngModel"
                      name="notification-user-mentioned-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.userMentioned.email"
                      #notificationUserMentionedEmail="ngModel"
                      name="notification-user-mentioned-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Atribuição em etapa do contrato
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar responsável que foi selecionado ao criar uma etapa na aba de gestão do contrato."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.stageResponsible.platform"
                      #notificationStageResponsiblePlatform="ngModel"
                      name="notification-stage-responsible-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.stageResponsible.email"
                      #notificationStageResponsibleEmail="ngModel"
                      name="notification-stage-responsible-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
                <tr>
                  <td style="text-align: left" class="td-left">
                    Recebimento do valor total
                    <nb-icon
                      status="info"
                      icon="info"
                      pack="eva"
                      [options]="{ animation: { type: 'pulse' } }"
                      nbTooltip="Notificar quando o membro do time receber todo o valor do contrato."
                      nbTooltipPlacement="top"
                      nbTooltipStatus="info"
                    ></nb-icon>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.teamMemberPaid.platform"
                      #notificationMemberPaidPlatform="ngModel"
                      name="notification-member-paid-p"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                  <td>
                    <nb-toggle
                      [(ngModel)]="clonedConfig.notificationConfig.teamMemberPaid.email"
                      #notificationMemberPaidEmail="ngModel"
                      name="notification-member-paid-e"
                      labelPosition="start"
                    ></nb-toggle>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </form>
  </nb-tab>
</nb-tabset>
<div style="padding: var(--tabset-content-padding); padding-top: 0">
  <button
    nbButton
    fullWidth
    status="primary"
    size="large"
    [disabled]="!allFormsValid || !isFormDirty.getValue() || isNotEdited()"
    (click)="updateConfig()"
  >
    Atualizar
  </button>
</div>
